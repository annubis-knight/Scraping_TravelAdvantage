{
  "scripts": {
    "0:install": "npm install",
    "0:help": "echo \"ðŸ“‹ SCRIPTS DISPONIBLES:\\n\\nðŸ”§ PHASE 0 - Installation:\\n  npm run 0:install - Installe les dÃ©pendances\\n\\nðŸ“… PHASE 1 - GÃ©nÃ©ration des dates:\\n  npm run 1:dates - GÃ©nÃ¨re Dates.json (interactif)\\n  npm run 1:dates-check - VÃ©rifie les dates gÃ©nÃ©rÃ©es\\n\\nðŸ•·ï¸  PHASE 2 - Scraping:\\n  npm run 2:scrape - Lance le scraping complet\\n  npm run 2:scrape-test - Test de scraping\\n\\nðŸ—ºï¸  PHASE 3 - GÃ©nÃ©ration des cartes:\\n  npm run 3:map-resume - GÃ©nÃ¨re resultat.xlsx\\n  npm run 3:map-data - GÃ©nÃ¨re mapData.js\\n  npm run 3:map-all - ExÃ©cute resume + data\\n\\nðŸŒ PHASE 4 - Serveur web:\\n  npm start - DÃ©marre le serveur (port 3000)\\n  npm run 4:start - Alias de start\\n\\nâœ… VÃ‰RIFICATIONS:\\n  npm run check:cities - Liste les villes configurÃ©es\\n  npm run check:results - Liste les fichiers Excel gÃ©nÃ©rÃ©s\\n  npm run check:dates - Affiche les dates\\n\\nðŸ”§ UTILITAIRES:\\n  npm run geocode - GÃ©ocodage avec API Ninja\"",

    "1:dates": "node src/dates/index.js",
    "1:dates-check": "node -e \"const dates = require('./src/scraping/json/Dates.json'); console.log('ðŸ“… DATES CONFIGURÃ‰ES:', dates.length); dates.slice(0, 10).forEach((d, i) => console.log(`  ${i+1}.`, d.date.fromDate, 'â†’', d.date.toDate, '- Type', d.date.type)); if(dates.length > 10) console.log('  ... et', dates.length - 10, 'autres dates');\"",

    "2:scrape": "node src/scraping/index.js",
    "2:scrape-test": "node src/scraping/scrapeHotels.js",

    "3:map-resume": "node src/MapLeaflet/index1_generateResume.js",
    "3:map-data": "node src/MapLeaflet/generateMap.js",
    "3:map-all": "npm run 3:map-resume && npm run 3:map-data",

    "4:start": "node server.js",
    "start": "npm run 4:start",

    "check:cities": "node -e \"const XLSX = require('exceljs'); const wb = new XLSX.Workbook(); wb.xlsx.readFile('./src/scraping/villesDeDestinations.xlsx').then(() => { const ws = wb.getWorksheet(1); console.log('ðŸ™ï¸  VILLES CONFIGURÃ‰ES:', ws.rowCount - 1); ws.eachRow((row, n) => { if(n > 1) { const ville = row.getCell(1).value; const pays = row.getCell(2).value; console.log(`  ${n-1}. ${ville}, ${pays}`); } }); });\"",

    "check:results": "node -e \"const fs = require('fs'); const path = './src/scraping/saveData/datasVilles'; if(!fs.existsSync(path)) { console.log('âŒ Aucun rÃ©sultat trouvÃ©'); process.exit(0); } const files = fs.readdirSync(path).filter(f => f.endsWith('.xlsx')); console.log('ðŸ“Š FICHIERS EXCEL GÃ‰NÃ‰RÃ‰S:', files.length); files.forEach((f, i) => console.log(`  ${i+1}. ${f}`));\"",

    "check:dates": "node -e \"const dates = require('./src/scraping/json/Dates.json'); console.log('ðŸ“… Total:', dates.length, 'dates'); const types = {1: 'Weekend', 2: 'Semaine', 3: '2 Semaines'}; const count = {1:0, 2:0, 3:0}; dates.forEach(d => count[d.date.type]++); Object.keys(count).forEach(t => console.log(`  - ${types[t]}: ${count[t]}`));\"",

    "geocode": "node src/geoCodingNinja/indexNinjasAPI.js"
  },
  "dependencies": {
    "body-parser": "^1.20.3",
    "csv-parser": "^3.0.0",
    "csv-writer": "^1.6.0",
    "exceljs": "^4.4.0",
    "express": "^4.21.0",
    "file-saver": "^2.0.5",
    "fs": "^0.0.1-security",
    "leaflet": "^1.9.4",
    "leaflet.markercluster": "^1.5.3",
    "node-fetch": "^2.7.0",
    "path": "^0.12.7",
    "puppeteer": "^23.2.0",
    "readline": "^1.3.0"
  }
}
